/* ===== Robotics Projects — v2 layout ===== */

/* Theming knobs (tweak freely) */
:root{
  --nav-offset: 72px;             /* JS will set correct value at runtime */
  --rail-width: 260px;
  --detail-max: 1000px;
  --mask-bg: rgba(0,0,0,.14);

  --proj-title-col: var(--text-col);
  --proj-body-col:  #2e3133;

  --proj-chip-bg:   #f2f6ff;
  --proj-chip-bd:   #dfe7ff;
  --proj-chip-tx:   #2b4fff;
  --proj-rail-bg:   #fafbff;
  --proj-detail-bg: #ffffff;

  --thumb-h: 110px;          /* thumbnail height; raise/lower to taste */
  --media-max-h: 250px;      /* cap the media height on desktop; tweak to taste */
}

#projects-shell{ position: relative; }

/* ---------- mask (click anywhere outside to close) ---------- */
.projects-mask{
  position: fixed;
  left: 0; right: 0;
  top: var(--nav-offset);
  height: calc(100vh - var(--nav-offset));
  background: var(--mask-bg);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
  z-index: 950;
}
.projects-focused .projects-mask{
  opacity: 1;
  pointer-events: auto;
}

/* ---------- left thumbnail rail ---------- */
.projects-rail{
  display: none;
  position: fixed;
  top: var(--nav-offset);
  left: 0;
  width: var(--rail-width);
  height: calc(100vh - var(--nav-offset));
  overflow: auto;
  padding: .6rem .5rem;
  background: var(--proj-rail-bg);
  border-right: 1px solid #eee;
  z-index: 960;
}

/* rail items */
.rail-item{ padding: .25rem; cursor: pointer; border-radius: .5rem; }
.rail-item:hover{ background:#eef2ff; }
.rail-item.active{ background:#e3e9ff; }

/* thumbnail + caption */
.rail-thumb{ position: relative; border-radius: .35rem; overflow: hidden; }
.rail-thumb img{
  width: 100%;
  height: var(--thumb-h);         /* taller thumbs */
  object-fit: cover;
  display: block;
  border-radius: .35rem;
}

/* masked title on hover (with subtle blur) */
.rail-caption{
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  padding: .35rem .5rem; text-align: center;
  color: #fff; font-weight: 700; font-size: .85rem;
  background: rgba(0,0,0,.28);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  opacity: 0; transform: translateY(4px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events: none;           /* click goes to the item */
}
.rail-item:hover .rail-caption,
.rail-item:focus-within .rail-caption{ opacity: 1; transform: translateY(0); }

/* ---------- slide-in detail panel ---------- */
.project-detail{
  position: fixed;
  top: var(--nav-offset);
  right: min(-60vw, -1000px);          /* hidden off-screen */
  width: min(60vw, var(--detail-max)); /* 60% viewport up to 1000px */
  height: calc(100vh - var(--nav-offset));
  background: var(--proj-detail-bg);
  border-left: 1px solid #eee;
  box-shadow: -12px 0 24px rgba(0,0,0,.06);
  transition: right .25s ease;
  z-index: 1000;
  display: flex; flex-direction: column;
}
.projects-focused .project-detail{ right: 0; }

.detail-back{
  position: sticky; top: .75rem; z-index: 2;
  margin: .5rem .75rem;
  align-self: flex-start;     /* <-- key: don't stretch across panel */
  flex: 0 0 auto;             /* prevent flex grow/shrink */
  display: inline-flex;       /* shrink to content */
  width: auto; inline-size: max-content; /* compact width */
  padding: .25rem .5rem;      /* smaller, slick */
  line-height: 1.1; font-size: .875rem; border-radius: .375rem;
}

/* content area scrolls independently */
.detail-scroll{ overflow:auto; padding: 0 1rem 2rem; }

/* while focused: show rail and shift list */
.projects-focused .projects-rail{ display:block; }
.projects-focused .projects-list{
  margin-left: var(--rail-width);
  transition: margin .25s ease;
}

/* FULL focus: hide listing completely (only rail + detail) */
.projects-focused-full .projects-list{ display:none; }
.projects-focused-full .project-detail{
  width: calc(100vw - var(--rail-width));
  right: 0;
}

/* ---------- Option B: media-left / text-right rows ---------- */
.projects-list{
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.25rem;
}

.proj-row{
  display: flex;
  gap: 1rem;
  align-items: stretch;
  background:#fff;
  border:1px solid #eee;
  border-radius:.5rem;
  overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,.04);
  transition: transform .15s ease, box-shadow .15s ease;
}
.proj-row:hover{ transform: translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.08); }

.proj-media{ 
  flex: 0 0 42%;                 /* left column width */
  background:#f6f6f8;
  height: auto;                  /* desktop height is assigned via JS */
}
.proj-media img, .proj-media video{
  width:100%; height:100%; object-fit:cover; display:block;
}

.proj-body{ 
  flex: 1 1 auto;
  padding:.875rem 1rem 1rem; 
}
.proj-title{ margin:0 0 .25rem; font-weight:800; color:var(--proj-title-col); }
.proj-summary{ margin:.25rem 0 .5rem; color:var(--proj-body-col); }

/* tags (chips) */
.proj-tags{ margin-bottom:.5rem; }
.tag-chip{
  display:inline-block;
  margin:0 .375rem .375rem 0;
  padding:.25rem .5rem;
  border-radius:999px;
  background:var(--proj-chip-bg);
  border:1px solid var(--proj-chip-bd);
  color:var(--proj-chip-tx);
  font-size:.8rem; font-weight:600; letter-spacing:.2px;
}

.proj-links .btn{ margin-right:.375rem; margin-bottom:.25rem; }

/* ---------- responsive ---------- */
@media (max-width: 991px){
  .proj-row{ flex-direction: column; }
  .proj-media{ 
    /* 160–240px depending on screen; override any inline height */
    height: clamp(160px, 45vw, 240px) !important;
  }
  .projects-focused .projects-rail,
  .projects-focused-full .projects-rail{ display:none; }
  .project-detail{ width:100vw; right:-100vw; }
}
/* force full-screen detail on small viewports */
@media (max-width: 992px){
  .project-detail{
    width: 100vw !important;
    right: -100vw !important;
    border-left: none;
  }
  .projects-focused .project-detail{
    right: 0 !important;
  }
  .projects-focused .projects-rail{ display: none !important; } /* no thumbs on phones */
}

/* quick typography knobs */
.proj-title{ font-size:1.1rem; }
.proj-summary{ font-size:1rem; line-height:1.55; }
